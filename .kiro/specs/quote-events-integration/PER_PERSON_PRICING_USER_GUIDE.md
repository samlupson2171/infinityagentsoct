# Per-Person Pricing User Guide

## Overview

The per-person pricing feature allows you to specify whether each event in a quote should be priced per person or as a flat rate. This ensures accurate pricing for different types of activities and services.

## Quick Start

1. Create or edit a quote
2. Select events from the event selector
3. For each event, check or uncheck "Price is per person"
4. The total price updates automatically
5. Save the quote

## Understanding Pricing Types

### Per-Person Pricing ☑
**Use when**: The event cost depends on the number of participants

**Examples**:
- Jet skiing (£50 per person)
- Parasailing (£75 per person)
- Spa treatments (£60 per person)
- Meal packages (£30 per person)
- Entry tickets (£20 per person)

**Calculation**: Event Price × Number of People

**Example**:
- Event: Jet Skiing
- Price: £50
- Group Size: 10 people
- **Total**: £50 × 10 = **£500**

### Flat Rate Pricing ☐
**Use when**: The event has a fixed cost regardless of group size

**Examples**:
- Private yacht charter (£500 flat)
- Venue hire (£300 flat)
- Photography service (£400 flat)
- DJ/Entertainment (£600 flat)
- Transport (£250 flat)

**Calculation**: Event Price (no multiplication)

**Example**:
- Event: Private Yacht Charter
- Price: £500
- Group Size: 10 people
- **Total**: **£500** (same regardless of group size)

## Step-by-Step Guide

### Creating a Quote with Events

#### Step 1: Enter Basic Quote Details
```
1. Fill in quote title and destination
2. Enter number of people (e.g., 10)
3. Enter number of rooms and nights
4. Select arrival date
```

#### Step 2: Select Events
```
1. Click "Select Events" button
2. Choose events from the filtered list
3. Selected events appear in "Selected Events" section
```

#### Step 3: Configure Pricing Type
```
For each event:
1. Look at the checkbox "Price is per person"
2. Check it if the event is priced per person
3. Leave unchecked if it's a flat rate
4. Watch the price update automatically
```

#### Step 4: Review Price Breakdown
```
1. Expand the "Price Breakdown" section
2. Verify each event's calculation
3. Check the events total
4. Confirm the final total price
```

#### Step 5: Save the Quote
```
1. Review all details
2. Click "Save Quote" or "Create Quote"
3. The pricing type is saved with each event
```

## Real-World Examples

### Example 1: Stag Party in Benidorm

**Group Details**:
- 12 people
- 3 nights
- Benidorm

**Package**: £1,800 (£150 per person)

**Events**:
1. **Paintball** - £25 per person
   - ☑ Price is per person
   - Calculation: £25 × 12 = £300

2. **Go-Karting** - £40 per person
   - ☑ Price is per person
   - Calculation: £40 × 12 = £480

3. **Private Bar Hire** - £400 flat
   - ☐ Price is per person
   - Calculation: £400

4. **Nightclub Entry** - £20 per person
   - ☑ Price is per person
   - Calculation: £20 × 12 = £240

**Events Total**: £300 + £480 + £400 + £240 = **£1,420**
**Total Quote**: £1,800 + £1,420 = **£3,220**
**Per Person**: £3,220 ÷ 12 = **£268.33**

### Example 2: Hen Party in Marbella

**Group Details**:
- 8 people
- 2 nights
- Marbella

**Package**: £1,600 (£200 per person)

**Events**:
1. **Spa Day** - £50 per person
   - ☑ Price is per person
   - Calculation: £50 × 8 = £400

2. **Private Yacht Charter** - £600 flat
   - ☐ Price is per person
   - Calculation: £600

3. **Cocktail Making Class** - £30 per person
   - ☑ Price is per person
   - Calculation: £30 × 8 = £240

4. **Beach Club Entry** - £25 per person
   - ☑ Price is per person
   - Calculation: £25 × 8 = £200

**Events Total**: £400 + £600 + £240 + £200 = **£1,440**
**Total Quote**: £1,600 + £1,440 = **£3,040**
**Per Person**: £3,040 ÷ 8 = **£380**

### Example 3: Corporate Team Building

**Group Details**:
- 25 people
- 1 night
- Barcelona

**Package**: £5,000 (£200 per person)

**Events**:
1. **Conference Room Hire** - £500 flat
   - ☐ Price is per person
   - Calculation: £500

2. **Lunch Catering** - £50 per person
   - ☑ Price is per person
   - Calculation: £50 × 25 = £1,250

3. **Team Building Activity** - £800 flat
   - ☐ Price is per person
   - Calculation: £800

4. **Coach Transport** - £600 flat
   - ☐ Price is per person
   - Calculation: £600

**Events Total**: £500 + £1,250 + £800 + £600 = **£3,150**
**Total Quote**: £5,000 + £3,150 = **£8,150**
**Per Person**: £8,150 ÷ 25 = **£326**

## What Happens When You Change Group Size?

### Scenario: Group Size Increases

**Initial Quote**:
- 10 people
- Jet Skiing: £50 per person ☑
- Event Cost: £50 × 10 = £500

**After Changing to 15 People**:
- 15 people
- Jet Skiing: £50 per person ☑
- Event Cost: £50 × 15 = £750 ← **Automatically updated!**

### Scenario: Group Size Decreases

**Initial Quote**:
- 20 people
- Parasailing: £75 per person ☑
- Event Cost: £75 × 20 = £1,500

**After Changing to 12 People**:
- 12 people
- Parasailing: £75 per person ☑
- Event Cost: £75 × 12 = £900 ← **Automatically updated!**

### Flat Rate Events Don't Change

**Initial Quote**:
- 10 people
- Yacht Charter: £500 flat ☐
- Event Cost: £500

**After Changing to 15 People**:
- 15 people
- Yacht Charter: £500 flat ☐
- Event Cost: £500 ← **Stays the same!**

## Tips and Best Practices

### ✅ Do's

1. **Check the actual pricing model** before toggling
   - Contact the supplier if unsure
   - Check previous quotes for the same event

2. **Use the Price Breakdown** to verify calculations
   - Expand the breakdown section
   - Check each event's calculation
   - Confirm the total makes sense

3. **Consider the per-person cost** when presenting to clients
   - Some clients prefer to see per-person pricing
   - Use the "Price per Person" in the breakdown

4. **Document special arrangements** in internal notes
   - Group discounts
   - Negotiated rates
   - Special conditions

5. **Review before sending** the quote to the client
   - Check all pricing types are correct
   - Verify calculations
   - Ensure currency matches

### ❌ Don'ts

1. **Don't guess** the pricing type
   - Always verify with the supplier
   - Check the event details

2. **Don't forget to update** when group size changes
   - The system updates automatically
   - But always double-check the new total

3. **Don't mix currencies** without noting it
   - System warns about currency mismatches
   - Convert or document the difference

4. **Don't ignore warnings**
   - Currency mismatch warnings
   - Price calculation errors
   - Validation messages

## Troubleshooting

### Issue: Price doesn't update when I toggle

**Solution**:
1. Check if the quote is saved (save first)
2. Refresh the page
3. Try toggling again
4. Check browser console for errors

### Issue: Calculation seems wrong

**Solution**:
1. Verify the base event price
2. Check the number of people
3. Confirm the pricing type (per person vs flat)
4. Use calculator: Price × People = Total
5. Check the Price Breakdown section

### Issue: Can't see the checkbox

**Solution**:
1. Ensure you're in edit mode
2. Check if events are selected
3. Scroll down to see all events
4. Try expanding the events section

### Issue: Total doesn't match my calculation

**Solution**:
1. Check for currency mismatches (excluded from total)
2. Verify base package price is included
3. Check if any events are excluded
4. Review the Price Breakdown for details

## Keyboard Shortcuts

- **Tab**: Navigate between checkboxes
- **Space**: Toggle checkbox
- **Enter**: Remove event (when focused on × button)
- **Esc**: Close event selector

## Mobile Usage

On mobile devices:
- Tap the checkbox to toggle
- Swipe to see full event names
- Tap "Show Details" to expand breakdown
- Use pinch-to-zoom if needed

## FAQ

### Q: Can I change the pricing type after saving?
**A**: Yes, edit the quote and toggle the checkbox. Save again to persist changes.

### Q: What if an event has both per-person and flat rate options?
**A**: Add the event twice with different names (e.g., "Jet Skiing (per person)" and "Jet Skiing (group rate)") and set the appropriate pricing type for each.

### Q: Does the pricing type affect the email sent to clients?
**A**: Yes, the email shows the calculation breakdown including per-person details.

### Q: Can I set a default pricing type for events?
**A**: Currently, all events default to flat rate (unchecked). You must manually check per-person events. Future enhancement may add default per event.

### Q: What happens if I delete an event that's in a quote?
**A**: The quote retains the event information (name and price) but shows a warning that the event is no longer available.

### Q: Can I have different pricing types for the same event in different quotes?
**A**: Yes, each quote stores its own pricing type for each event independently.

## Support

If you need help:
1. Check this guide first
2. Review the Price Breakdown for calculation details
3. Contact your system administrator
4. Report bugs with screenshots and quote details

## Version History

- **v1.0** (Task 18) - Initial implementation of per-person pricing toggle
  - Added checkbox toggle in SelectedEventsList
  - Implemented automatic price calculation
  - Enhanced PriceBreakdown with calculation details
  - Added documentation and user guide
